import{r as y,j as e,X as f,b as p,R as v}from"../../assets/globals-CiO-dAWo.js";import{E as b}from"../../assets/EmptyState-DePBRdlM.js";import{C as w}from"../../assets/clock-BErLbT1W.js";import{S as g}from"../../assets/search-CXRBG8El.js";import{E as j}from"../../assets/external-link-BkW-I2U_.js";function N({history:h,onNavigate:x,onClose:n}){const[c,o]=y.useState(""),r=h.filter(t=>t.title.toLowerCase().includes(c.toLowerCase())||t.url.toLowerCase().includes(c.toLowerCase())),a=(t=>{const i=Date.now(),s=864e5,u=s*7;return{today:t.filter(l=>i-l.visitTime<s),yesterday:t.filter(l=>i-l.visitTime>=s&&i-l.visitTime<s*2),lastWeek:t.filter(l=>i-l.visitTime>=s*2&&i-l.visitTime<u)}})(r),m=(t,i)=>i.length===0?null:e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"px-2 py-2 text-xs text-gray-400 uppercase tracking-wider font-medium",children:t}),e.jsx("div",{className:"space-y-2",children:i.map((s,u)=>e.jsxs("button",{onClick:()=>{x(s.url)},className:"w-full p-3 rounded-lg bg-white/5 hover:bg-white/10 text-left flex items-start gap-3 group transition-all border border-white/10 hover:border-white/20",children:[e.jsx(w,{className:"w-4 h-4 mt-0.5 text-blue-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm truncate font-medium text-white",children:s.title}),e.jsx("div",{className:"text-xs text-gray-400 truncate mt-1",children:s.url})]}),e.jsx(j,{className:"w-4 h-4 mt-0.5 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity"})]},u))})]},t);return e.jsxs("div",{className:"h-full w-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-white/10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"font-semibold text-white",children:"History"})]}),e.jsx("button",{onClick:n,className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors text-gray-300 hover:text-white","aria-label":"Close history",title:"Close (Esc)",children:e.jsx(f,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-shrink-0 p-4 border-b border-white/10",children:e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:t=>o(t.target.value),placeholder:"Search history...",className:"w-full h-10 pl-10 pr-3 rounded-lg bg-white/5 border border-white/10 outline-none focus:bg-white/10 focus:border-white/20 text-sm text-white placeholder:text-gray-400 transition-all","aria-label":"Search history"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r.length===0?e.jsx(b,{icon:w,title:"No history yet",description:"Your browsing history will appear here as you navigate the web."}):e.jsxs(e.Fragment,{children:[m("Today",a.today),m("Yesterday",a.yesterday),m("Last Week",a.lastWeek)]})})]})}function k(){const[h,x]=y.useState([]),n=()=>{var o;(o=window.electronAPI)==null||o.hideOverlay("history")},c=async o=>{var r;await((r=window.electronAPI)==null?void 0:r.navigate(o)),n()};return y.useEffect(()=>{(async()=>{var d;try{const a=await((d=window.electronAPI)==null?void 0:d.getHistory());a&&x(a)}catch(a){console.error("Failed to load history:",a)}})();const r=d=>{d.key==="Escape"&&n()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]),e.jsxs("div",{className:"h-screen w-full bg-transparent dark overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 via-white/5 to-transparent backdrop-blur-xl"}),e.jsx("div",{className:"absolute inset-0 border-r-2 border-white/30 shadow-2xl"}),e.jsx("div",{className:"relative z-10 h-full",children:e.jsx(N,{history:h,onNavigate:c,onClose:n})})]})}p.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(k,{})}));
