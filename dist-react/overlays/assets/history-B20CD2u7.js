import{r as y,j as e,X as f,b as p,R as v}from"../../assets/globals-CiO-dAWo.js";import{E as b}from"../../assets/EmptyState-DePBRdlM.js";import{C as w}from"../../assets/clock-BErLbT1W.js";import{S as g}from"../../assets/search-CXRBG8El.js";import{E as j}from"../../assets/external-link-BkW-I2U_.js";function N({history:h,onNavigate:x,onClose:c}){const[d,l]=y.useState(""),a=h.filter(s=>s.title.toLowerCase().includes(d.toLowerCase())||s.url.toLowerCase().includes(d.toLowerCase())),t=(s=>{const o=Date.now(),r=864e5,u=r*7;return{today:s.filter(n=>o-n.visitTime<r),yesterday:s.filter(n=>o-n.visitTime>=r&&o-n.visitTime<r*2),lastWeek:s.filter(n=>o-n.visitTime>=r*2&&o-n.visitTime<u)}})(a),m=(s,o)=>o.length===0?null:e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"px-2 py-2 text-xs text-gray-400 uppercase tracking-wider font-medium",children:s}),e.jsx("div",{className:"space-y-2",children:o.map((r,u)=>e.jsxs("button",{onClick:()=>{x(r.url)},className:"w-full p-3 rounded-lg bg-white/5 hover:bg-white/10 text-left flex items-start gap-3 group transition-all border border-white/10 hover:border-white/20",children:[e.jsx(w,{className:"w-4 h-4 mt-0.5 text-blue-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm truncate font-medium text-white",children:r.title}),e.jsx("div",{className:"text-xs text-gray-400 truncate mt-1",children:r.url})]}),e.jsx(j,{className:"w-4 h-4 mt-0.5 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity"})]},u))})]},s);return e.jsxs("div",{className:"h-full w-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-white/10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-blue-400"}),e.jsx("h3",{className:"font-semibold text-white",children:"History"})]}),e.jsx("button",{onClick:c,className:"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors text-gray-300 hover:text-white","aria-label":"Close history",title:"Close (Esc)",children:e.jsx(f,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-shrink-0 p-4 border-b border-white/10",children:e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:d,onChange:s=>l(s.target.value),placeholder:"Search history...",className:"w-full h-10 pl-10 pr-3 rounded-lg bg-white/5 border border-white/10 outline-none focus:bg-white/10 focus:border-white/20 text-sm text-white placeholder:text-gray-400 transition-all","aria-label":"Search history"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.length===0?e.jsx(b,{icon:w,title:"No history yet",description:"Your browsing history will appear here as you navigate the web."}):e.jsxs(e.Fragment,{children:[m("Today",t.today),m("Yesterday",t.yesterday),m("Last Week",t.lastWeek)]})})]})}function k(){const[h,x]=y.useState([]),c=()=>{var l;(l=window.electronAPI)==null||l.hideOverlay("history")},d=async l=>{var i,t;const a=await((i=window.electronAPI)==null?void 0:i.getActiveTab());a&&await((t=window.electronAPI)==null?void 0:t.updateTab(a.id,l)),c()};return y.useEffect(()=>{(async()=>{var i;try{const t=await((i=window.electronAPI)==null?void 0:i.getHistory());t&&x(t)}catch(t){console.error("Failed to load history:",t)}})();const a=i=>{i.key==="Escape"&&c()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]),e.jsxs("div",{className:"h-screen w-full bg-transparent dark overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 via-white/5 to-transparent backdrop-blur-xl"}),e.jsx("div",{className:"absolute inset-0 border-r-2 border-white/30 shadow-2xl"}),e.jsx("div",{className:"relative z-10 h-full",children:e.jsx(N,{history:h,onNavigate:d,onClose:c})})]})}p.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(k,{})}));
